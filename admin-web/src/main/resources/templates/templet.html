<!-- 模版页面 用于处理简单的页面模版 -->
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"  xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"  xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en"  xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <!--/*/ <th:block th:include="fragments/headerinc :: head"></th:block> /*/-->
    <link th:href="@{/assets/global/plugins/datatables/datatables.min.css}" rel="stylesheet" type="text/css" />
    <link th:href="@{/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css}" rel="stylesheet" type="text/css" />
    <title>主页</title>
    <style type="text/css">
    	.required{
    		color:red;
    	}
    </style>
</head>
<!-- 固定菜单和底部 -->
<body  class="page-sidebar-closed-hide-logo page-content-white page-header-fixed  page-footer-fixed page-sidebar-fixed">
	<!--/*/ <th:block th:include="fragments/headerinc :: top"></th:block> /*/-->
	<div class="clearfix"></div>
	<div class="page-container">
		<!--/*/ <th:block th:include="fragments/headerinc :: menu"></th:block> /*/-->
		<div class="page-content-wrapper">
		<div class="page-content">
		<!--/*/ <th:block th:include="fragments/headerinc :: bar"></th:block> /*/-->
		<h3 class="page-title">
			页面配置
		</h3>
	 	 <div class="row">
			<div class="col-md-12">
				<div class="m-heading-1 border-green m-bordered">
					<h3>使用须知</h3>
					<p>可以通过表和链接结合配置选择Table属性,Mongo表需要通过接口返回的数据配置Table属性,如果没有数据,请添加测试数据后再配置页面.(带有接口数据配置更轻松哦),配置页面需要提前定义好接口.</p>
				</div>
				 <div class="portlet light bordered" id="form_wizard_1">
				 	 <div class="portlet-title">
				 	 	 <div class="caption">
                              <i class=" icon-layers font-red"></i>
                              <span class="caption-subject font-red bold uppercase"> Form Wizard -
                                  <span class="step-title"> Step 1 of 4 </span>
                              </span>
                          </div>
				 	 </div>
				 	 <div class="portlet-body form">
				 	 	<form class="form-horizontal" action="#" id="submit_form" method="POST">
				 	 		 <div class="form-wizard">
				 	 		 	<div class="form-body">
				 	 		 		<ul class="nav nav-pills nav-justified steps">
                                         <li>
                                             <a href="#tab1" data-toggle="tab" class="step">
                                                 <span class="number"> 1 </span>
                                                 <span class="desc">
                                                     <i class="fa fa-check"></i> 设置页面参数 </span>
                                             </a>
                                         </li>
                                         <li>
                                             <a href="#tab2" data-toggle="tab" class="step">
                                                 <span class="number"> 2 </span>
                                                 <span class="desc">
                                                     <i class="fa fa-check"></i> 设置表 </span>
                                             </a>
                                         </li>
                                         <li>
                                             <a href="#tab3" data-toggle="tab" class="step active">
                                                 <span class="number"> 3 </span>
                                                 <span class="desc">
                                                     <i class="fa fa-check"></i> 设置Modal </span>
                                             </a>
                                         </li>
                                         <li>
                                             <a href="#tab4" data-toggle="tab" class="step">
                                                 <span class="number"> 4 </span>
                                                 <span class="desc">
                                                     <i class="fa fa-check"></i> 确认并提交 </span>
                                             </a>
                                         </li>
                                     </ul>
                                     <div id="bar" class="progress progress-striped" role="progressbar">
                                         <div class="progress-bar progress-bar-success"> </div>
                                     </div>
                                     <div class="tab-content"> 	
                                     	<div class="tab-pane active" id="tab1">
                                     		<div class="form-group">
                                     			<label class="control-label col-md-3">页面URL:
                                                     <span class="required"> * </span>
                                                 </label>
                                                 <div class="col-md-4">
                                                    <input th:value="!${menu.resource}?'':${menu.resource.value}" type="text" class="form-control" name="viewUrl" id="viewUrl" readonly="readonly"/>
                                                 </div>
                                     		</div>
                                     		<div class="form-group">
                                     			<label class="control-label col-md-3">查询URL:
                                                     <span class="required"> * </span>
                                                 </label>
                                                 <div class="col-md-4">
                                                     <select id="resource" name="resource" class="form-control select2-allow-clear" data-placeholder="请选择"></select>
                                                      <span class="help-block"> 请配置对应的查询URL,需要返回完整的实例数据,只能解析一层数据模型,如果有多层,请手动维护! </span>
                                                 </div>
                                     		</div>
                                     		<div class="form-group">
                                     			<label class="control-label col-md-3">是否开启搜索功能:
                                                     <span class="required"> * </span>
                                                 </label>
                                                 <div class="col-md-4">
                                                    <input type="checkbox" class="make-switch" checked="checked" data-on-text="是" data-off-text="否" id="isSearch" name="isSearch" />
                                                 </div>
                                     		</div>
                                     		<div class="form-group">
                                     			<label class="control-label col-md-3">按钮组:</label>
                                                 <div class="col-md-4">
                                                     <select id="btns" name="btns" multiple="multiple" class="form-control select2" data-placeholder="请选择">
                                                     	
                                                     </select>
                                                     <span class="help-block"> 批量 功能需要Table开启check功能 ,导入功能需要定义好方法</span>
                                                 </div>
                                     		</div>
                                     	</div>
                                     	<div class="tab-pane" id="tab2">
                                     		<div id="tab2_btns">
                                     			<a class="btn btn-sm btn-default tooltips" href="javascript:;" data-original-title="添加一条数据,对应于页面Table列,用于设置自定义的列,如:操作列" onclick="Templet.open('#plus_modal');"><i class="fa fa-plus"></i> 添加行</a>
                                     			<a class="btn btn-sm btn-default tooltips" href="javascript:;" data-original-title="页面搜索设置,需要后台Query方法接受并解析该查询参数" onclick="Templet.open('#search_modal');"><i class="fa fa-search"></i> 搜索设置</a>
                                     			<a class="btn btn-sm btn-default tooltips" href="javascript:;" data-original-title="jQuery Validate 框架参数设置,只需要设置Rule 和  Message 参数,(其它参数页面不解析)" onclick="Templet.open('#jqeury_validate_modal');"><i class="fa fa-retweet"></i> jQuery Validate 设置</a>
                                     			<a class="btn btn-sm btn-default tooltips" href="javascript:;" data-original-title="编辑行操作按钮,建议选择可用组件" onclick="Templet.open('#manipulation_modal');"><i class="fa fa-share-alt"></i> 数据操作</a>
                                     			<a class="btn btn-sm btn-default tooltips" href="javascript:;" data-original-title="操作说明" onclick="Templet.open('#question_modal');"> <i class="fa fa-question-circle"></i> </a> 
                                     		</div>
                                     		<table class="table table-striped table-bordered table-hover dt-responsive" id="tab2_table" 
                                     		data-toolbar="#tab2_btns"
                                     		>
                                     			<thead class="bg-purple-soft">
                                     				<tr>
                                     					<th data-data="sort" data-orderable="false">序号</th>
                                     					<th data-data="title" data-width="300" data-formatter="toEdit" data-orderable="false">标题</th>
                                     					<th data-data="source" data-orderable="false">来源</th>
                                     					<th data-data="name" data-orderable="false">字段名</th>
                                     					<th data-data="isShow" data-formatter="toShowChecked" data-orderable="false">是否显示</th>
                                     					<th data-data="isAdd" data-formatter="toAddChecked" data-orderable="false">是否新增</th>
                                     					<th data-data="name"  data-formatter="toBtn" data-orderable="false">操作</th>	
                                     				</tr>
                                     			</thead>
                                     			<tbody>
                                     				
                                     			</tbody>
                                     		</table>
                                     	</div>
                                     	<div class="tab-pane" id="tab3">
                                     	
                                     	</div>
                                     	<div class="tab-pane" id="tab4">
                                     	
                                     	</div> 	
                                     </div>
				 	 		 	</div>
				 	 		 	<div class="form-actions">
                                    <div class="row">
                                        <div class="col-md-offset-3 col-md-9">
                                            <a href="javascript:;" class="btn default button-previous">
                                                <i class="fa fa-angle-left"></i> 上一步 </a>
                                            <a href="javascript:;" class="btn btn-outline green button-next"> 下一步
                                                <i class="fa fa-angle-right"></i>
                                            </a>
                                            <a href="javascript:;" class="btn green button-submit hide"> 提交
                                                <i class="fa fa-check"></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
				 	 		 </div>
				 	 	</form>
				 	 </div>
				 </div>
			</div>
		</div>
		
		</div>	
		</div>
	</div>
	<!-- 数据转换 -->
	<div id="transformation_modal" class="modal fade" tabindex="-1" aria-hidden="true" data-role="modal" data-backdrop="static" data-keyboard="false">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
					<h4 class="modal-title">字段转换</h4>
				</div>
				<div class="modal-body">
					<form th:action="@{/account/register}" class="form-horizontal" autocomplete="off"  novalidate="novalidate"  role="form" method="post" data-role="form" >
						<div class="form-body">
							<div class="form-group">
								<label class="col-md-3 control-label">选择转义方法</label>
								<div class="col-md-9">
									<select class="form-control select2-allow-clear" data-placeholder="请选择" id="transformations" name="transformations">
									</select>
								</div>
							</div>
							
						</div>
					</form>
				</div>
				<div class="modal-footer">
                     <button type="button" data-dismiss="modal" class="btn dark btn-outline">关闭</button>
                     <button type="button" class="btn green" data-role="save" onclick="Templet.save(this);">保存</button>
                 </div>
			</div>
		</div>
	</div>
	<!-- 搜索设置 -->
	<div id="search_modal" class="modal fade ignore" tabindex="-1" aria-hidden="true" data-role="modal" data-backdrop="static" data-keyboard="false">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
					<h4 class="modal-title">字段转换</h4>
				</div>
				<div class="modal-body">
					<form th:action="@{/account/register}" class="form-horizontal" autocomplete="off"  novalidate="novalidate"  role="form" method="post" data-role="form" >
						<div class="form-body">
							<div class="form-group">
								<label class="col-md-3 control-label">选择转义方法</label>
								<div class="col-md-9">
									<select class="form-control select2-allow-clear" data-placeholder="请选择" id="transformations" name="transformations">
									</select>
								</div>
							</div>
							
						</div>
					</form>
				</div>
				<div class="modal-footer">
                     <button type="button" data-dismiss="modal" class="btn dark btn-outline">关闭</button>
                     <button type="button" class="btn green" data-role="save" onclick="Account.save();">保存</button>
                 </div>
			</div>
		</div>
	</div>
	<!-- jQuery Validate 设置 -->
	<div id="jqeury_validate_modal" class="modal fade ignore" tabindex="-1" aria-hidden="true" data-role="modal" data-backdrop="static" data-keyboard="false">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
					<h4 class="modal-title">字段转换</h4>
				</div>
				<div class="modal-body">
					<form  class="form-horizontal" autocomplete="off"  novalidate="novalidate"  role="form" method="post" data-role="form" >
						<div class="form-body">
							<div class="form-group">
								<label class="col-md-3 control-label">Rule:</label>
								<div class="col-md-9">
									<textarea name="jqeury_validate_rule" id="jqeury_validate_rule" rows="6" class="form-control"></textarea>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-3 control-label">Message:</label>
								<div class="col-md-9">
									<textarea name="jqeury_validate_message" id="jqeury_validate_message" rows="6" class="form-control"></textarea>
								</div>
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
                     <button type="button" data-dismiss="modal" class="btn dark btn-outline">关闭</button>
                     <button type="button" class="btn green" data-role="save" onclick="Account.save();">保存</button>
                 </div>
			</div>
		</div>
	</div>
	<!-- 行数据操作 -->
	<div id="manipulation_modal" class="modal fade ignore" tabindex="-1" aria-hidden="true" data-role="modal" data-backdrop="static" data-keyboard="false">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
					<h4 class="modal-title">行数据操作</h4>
				</div>
				<div class="modal-body">
					<form th:action="@{/account/register}" class="form-horizontal" autocomplete="off"  novalidate="novalidate"  role="form" method="post" data-role="form" >
						<div class="form-body">
							<div class="form-group">
								<label class="col-md-3 control-label">选择操作方法</label>
								<div class="col-md-9">
									<select class="form-control select2-allow-clear" data-placeholder="请选择" id="operation_btn" name="operation_btn"  multiple="multiple">
									</select>
								</div>
							</div>
							<div class="more hide">
								<div class="form-group ">
									<label class="col-md-3 control-label">方法名称</label>
									<div class="col-md-9">
										<input type="text" id="name" name="name" class="form-control" maxlength="20" placeholder="方法名称" value="" />
									</div>
								</div>
								<div class="form-group ">
									<label class="col-md-3 control-label">Url</label>
									<div class="col-md-9">
										<input type="text" id="url" name="url" class="form-control" maxlength="20" placeholder="url" value="" />
									</div>
								</div>
								<div class="form-group ">
									<label class="col-md-3 control-label">参数</label>
									<div class="col-md-9">
										<select class="form-control" data-placeholder="请选择" id="parameter" name="parameter"  multiple="multiple">
											
										</select>
									</div>
								</div>
							</div>	
						</div>
					</form>
				</div>
				<div class="modal-footer">
                     <button type="button" data-dismiss="modal" class="btn dark btn-outline">关闭</button>
                     <button type="button" class="btn green" data-role="save" onclick="Account.save();">保存</button>
                 </div>
			</div>
		</div>
	</div>
	<!-- 疑难解答 -->
	<div id="question_modal" class="modal fade ignore" tabindex="-1" aria-hidden="true" data-role="modal" >
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
					<h4 class="modal-title">帮助</h4>
				</div>
				<div class="modal-body">
					<form th:action="@{/account/register}" class="form-horizontal" autocomplete="off"  novalidate="novalidate"  role="form" method="post" data-role="form" >
						<div class="form-body">
							<div class="form-group">
								<label class="col-md-3 control-label">选择转义方法</label>
								<div class="col-md-9">
									<select class="form-control select2-allow-clear" data-placeholder="请选择" id="transformations" name="transformations">
									</select>
								</div>
							</div>
							
						</div>
					</form>
				</div>
				<div class="modal-footer">
                     <button type="button" data-dismiss="modal" class="btn dark btn-outline">关闭</button>
                 </div>
			</div>
		</div>
	</div>
	<!-- 添加行 -->
	<div id="plus_modal" class="modal fade" tabindex="-1" aria-hidden="true" data-role="modal" data-backdrop="static" data-keyboard="false">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
					<h4 class="modal-title">添加行</h4>
				</div>
				<div class="modal-body">
					<form th:action="@{/account/register}" class="form-horizontal" autocomplete="off"  novalidate="novalidate"  role="form" method="post" data-role="form" >
						<div class="form-body">
							 <div class="form-group">
								<label class="col-md-3 control-label">标题</label>
								<div class="col-md-9">
									<input type="text" id="title" name="title" class="form-control" maxlength="20" placeholder="标题" value="" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-3 control-label">字段名</label>
								<div class="col-md-9">
									<input type="text" id="name" name="name" class="form-control" maxlength="20" placeholder="字段名" value="" />
									 <span class="help-block"> 如果字段名没有对应接口实际返回数据,可能会造成页面崩溃! </span>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-3 control-label">是否显示</label>
								<div class="col-md-9">
									<input type="checkbox" class="make-switch" checked="checked" data-on-text="是" data-off-text="否" id="isShow" name="isShow" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-3 control-label">是否新增</label>
								<div class="col-md-9">
									<input type="checkbox" class="make-switch" checked="checked"  data-on-text="是" data-off-text="否" id="isAdd" name="isAdd" />
									
								</div>
							</div> 
							
						</div>
					</form>
				</div>
				<div class="modal-footer">
                     <button type="button" data-dismiss="modal" class="btn dark btn-outline">关闭</button>
                     <button type="button" class="btn green" data-role="save" onclick="Templet.plus(this);">保存</button>
                 </div>
			</div>
		</div>
	</div>
	<!--/*/ <th:block th:include="fragments/headerinc :: footer"></th:block> /*/-->
    <!--/*/ <th:block th:include="fragments/headerinc :: script"></th:block> /*/-->
    <script type="text/javascript" th:src="@{/assets/global/scripts/datatable.min.js}"></script>
    <script type="text/javascript" th:src="@{/assets/global/plugins/datatables/datatables.min.js}"></script>
    <script type="text/javascript" th:src="@{/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js}"></script>
    <script type="text/javascript" th:src="@{/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js}"></script>
    <script th:src="@{/assets/global/plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.js}" type="text/javascript"></script>
    <script th:src="@{/assets/custom/system/templet.js}" type="text/javascript"></script>
    <script type="text/javascript" th:inline="javascript">
    /*<![CDATA[*/
    	var url=/*[[@{/resource/getAction}]]*/;
    	$(function(){
    		Templet.init({
    			wizard:'#form_wizard_1',
    			action:url
    		});
    	});
    	
    	var toShowChecked=function(data,rows,index){
    		var c=data==true||data=='true'?'checked="checked"':'';
    		return '<label class="mt-checkbox mt-checkbox-outline"><input type="checkbox" value="'+rows.name+'" name="isShow" '+c+'/><span></span></label>';
    	}
    	
    	var toAddChecked=function(data,rows,index){
    		var c=data==true||data=='true'?'checked="checked"':'';
    		return '<label class="mt-checkbox mt-checkbox-outline"><input type="checkbox" value="'+rows.name+'" name="isAdd" '+c+'/><span></span></label>';
    	}
    	
    	function toEdit(data,rows,index){
    		var name='title['+index.row+']';
    		return '<div style="overflow:hidden;height:100%;"><input type="text" value="'+data+'" name="'+name+'" id="'+name+'" style="border:none;width:100%;outline:none;"/></div>';
    	}
    	
    	var toBtn=function(data,rows,index){
    		var str=escape(JSON.stringify(rows));
    		var btn='<div data-rows="'+str+'" class="data">';
    		btn+='<a class="grey-cascade btn btn-xs ladda-button" href="javascript:;" onclick="Templet.open(\'#transformation_modal\',this);" data-style="expand-right" data-size="xs" title="字段转换">字段转换 <i class="fa fa-refresh"></i></a>';
    		if(rows.source=='Add'){
    			btn+='<a class="red-sunglo btn btn-xs ladda-button" href="javascript:;" onclick="Templet.remove(this);" data-style="expand-right" data-size="xs" title="搜索设置">删除 <i class="fa fa-times"></i></a>';
        		
    		}
    		btn+='</div>';
    		return btn;
    	}
    	//获取数据
    	var getData=function(e){
    		var div=$(e).parent();
    		return JSON.parse(unescape(div.data('rows')));
    	}
    		
		/*]]>*/
	</script>
</body>
</html>